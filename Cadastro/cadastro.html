<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="cadastro.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <title>Cadastro Multi-Connect</title>
</head>
<body>
  <div class="tela">
    <div class="lado-esquerdo">

      <span class="">
        <a href="../Home/home.html" style="text-decoration:none; color: #196adbd2;"><i class="bi bi-caret-left-fill"></i> Voltar</a>
      </span>

      <div class="signup-box">
        <h2>Facilite sua conexão</h2>
        <form id="signupForm" method="get">
          <div class="textbox">
            <input type="text" placeholder="Nome Completo" id="name" required>
          </div>
          <div class="textbox">
            <input id="username" type="text" placeholder="Nome de Usuário" required>
          </div>
          <div class="textbox">
            <input id="email" type="email" placeholder="Email/Telefone" required>
          </div>
          <div class="textbox" id="senha">
            <input id="senhaInput" type="password" placeholder="Senha" required>
            <button id="ativarsenha" type="button" onclick="togglePasswordVisibility()">
              <img src="../imgs/olhofechado.png" alt="olho aberto" class="olho" id="olhoFechado">
            </button>
          </div>
          <div class="data">
            <input type="date" id="data" required>
          </div>
          <button class="btn" type="submit">Cadastrar-se</button>
        </form>

        <div class="login-link">
          <p>Já tem uma conta? <a href="../login/login.html" class="login">Entrar</a></p>
        </div>
        <div class="divisor"><em><p><hr>OU<hr></p></em></div>
        <div class="social-media">
          <div class="social-links"><a href=""><img src="../imgs/facebook.png" alt=""></a></div>
          <div class="social-links"><a href=""><img src="../imgs/google.png" alt=""></a></div>
          <div class="social-links"><a href="#"><img src="../imgs/github.png" alt=""></a></div>
          <div class="social-links"><a href="#"><img src="../imgs/linkedin.avif" alt=""></a></div>
        </div>
      </div>
    </div>

    <div class="lado-direito">
      <img src="../imgs/investimentos.avif" alt="Imagem decorativa">
    </div>
  </div>

  <script src="../Scripts/script.js"></script>
  <script>
    window.onload = function () {
      const isLoggedIn = localStorage.getItem('isLoggedIn');
      if (isLoggedIn === 'true') {
        window.location.href = '../Home/home.html';
      }
    };

    document.getElementById('signupForm').addEventListener('submit', function (event) {
      event.preventDefault();

      const name = document.getElementById('name').value;
      const username = document.getElementById('username').value;
      const email = document.getElementById('email').value;
      const password = document.getElementById('senhaInput').value;
      const data = document.getElementById('data').value;

      const users = JSON.parse(localStorage.getItem('users')) || [];
      const jaExiste = users.some(user => user.email === email || user.username === username);
      if (jaExiste) {
        alert("Já existe uma conta com esse email ou nome de usuário.");
        return;
      }

      users.push({ name, username, email, password, data });
      localStorage.setItem('users', JSON.stringify(users));
      localStorage.setItem('isLoggedIn', 'true');
      localStorage.setItem('userName', name);
      localStorage.setItem('userUsername', username);
      localStorage.setItem('userEmail', email);
      localStorage.setItem('userDate', data);

      window.location.href = '../Home/home.html';
    });
  </script>
</body>

</html>